#! /usr/bin/env python3
# Blashyrkh.maniac.coding
# BTC:1Maniaccv5vSQVuwrmRtfazhf2WsUJ1KyD DOGE:DManiac9Gk31A4vLw9fLN9jVDFAQZc2zPj

import my
import binascii

config=my.Config()
db=my.DatabaseConnectionFactory.connect(config["database"])

h=my.cgijsonrpc.Handler(
    keyid=config.get("security", {}).get("hmac-keyid", None),
    key=config.get("security", {}).get("hmac-key", None))

h.addMethod("get-address", my.rpc.GetAddress(db=db, config=config))
h.addMethod("get-tx-status", my.rpc.GetTxStatus(db=db))
h.addMethod("send", my.rpc.Send(db=db, config=config))
# TODO: estimate-fee

my.extapi.register(db=db, config=config, handler=h)

h.run()
